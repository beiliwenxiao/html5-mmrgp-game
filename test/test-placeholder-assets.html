<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å ä½ç¬¦èµ„æºæµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #4DABF7;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        .section h2 {
            color: #51CF66;
            margin-top: 0;
        }
        .assets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .asset-item {
            text-align: center;
            padding: 10px;
            background: #333;
            border-radius: 8px;
        }
        .asset-item canvas {
            display: block;
            margin: 0 auto 10px;
            background: #444;
            border-radius: 4px;
        }
        .asset-item label {
            display: block;
            font-size: 12px;
            color: #aaa;
        }
        .info {
            background: #1e3a5f;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .stats {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        .stat {
            flex: 1;
            background: #2a2a2a;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #4DABF7;
        }
        .stat-label {
            font-size: 12px;
            color: #aaa;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ å ä½ç¬¦èµ„æºæµ‹è¯•</h1>
        
        <div class="info">
            <h3>ğŸ“‹ æµ‹è¯•è¯´æ˜</h3>
            <p>æ­¤é¡µé¢å±•ç¤ºäº†åŠ¨æ€ç”Ÿæˆçš„å ä½ç¬¦èµ„æºï¼Œç”¨äºæ¸¸æˆå¼€å‘åˆæœŸé˜¶æ®µã€‚</p>
            <p>æ‰€æœ‰èµ„æºéƒ½æ˜¯é€šè¿‡ Canvas API å®æ—¶ç”Ÿæˆçš„ï¼Œæ— éœ€å¤–éƒ¨å›¾ç‰‡æ–‡ä»¶ã€‚</p>
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="totalAssets">0</div>
                    <div class="stat-label">æ€»èµ„æºæ•°</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="cacheSize">0</div>
                    <div class="stat-label">ç¼“å­˜å¤§å°</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="loadTime">0ms</div>
                    <div class="stat-label">åŠ è½½æ—¶é—´</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ‘¤ è§’è‰²ç²¾çµ</h2>
            <div class="assets-grid" id="characterSprites"></div>
        </div>

        <div class="section">
            <h2>ğŸ‘¾ æ•Œäººç²¾çµ</h2>
            <div class="assets-grid" id="enemySprites"></div>
        </div>

        <div class="section">
            <h2>âš”ï¸ æŠ€èƒ½å›¾æ ‡</h2>
            <div class="assets-grid" id="skillIcons"></div>
        </div>

        <div class="section">
            <h2>ğŸ¨ UIå…ƒç´ </h2>
            <div class="assets-grid" id="uiElements"></div>
        </div>

        <div class="section">
            <h2>âœ¨ ç²’å­çº¹ç†</h2>
            <div class="assets-grid" id="particleTextures"></div>
        </div>
    </div>

    <script type="module">
        import { PlaceholderAssets } from './src/core/PlaceholderAssets.js';
        import { AssetManager } from './src/core/AssetManager.js';

        const startTime = performance.now();
        const placeholderAssets = new PlaceholderAssets();
        const assetManager = new AssetManager();

        let totalAssets = 0;

        // æ˜¾ç¤ºè§’è‰²ç²¾çµ
        const characterClasses = [
            { name: 'warrior', label: 'æˆ˜å£«' },
            { name: 'mage', label: 'æ³•å¸ˆ' },
            { name: 'archer', label: 'å¼“ç®­æ‰‹' }
        ];
        const characterContainer = document.getElementById('characterSprites');
        characterClasses.forEach(({ name, label }) => {
            const sprite = placeholderAssets.createCharacterSprite(name, 64);
            const item = createAssetItem(sprite, label);
            characterContainer.appendChild(item);
            totalAssets++;
        });

        // æ˜¾ç¤ºæ•Œäººç²¾çµ
        const enemyTypes = [
            { name: 'slime', label: 'å²è±å§†' },
            { name: 'goblin', label: 'å“¥å¸ƒæ—' },
            { name: 'skeleton', label: 'éª·é«…' }
        ];
        const enemyContainer = document.getElementById('enemySprites');
        enemyTypes.forEach(({ name, label }) => {
            const sprite = placeholderAssets.createEnemySprite(name, 64);
            const item = createAssetItem(sprite, label);
            enemyContainer.appendChild(item);
            totalAssets++;
        });

        // æ˜¾ç¤ºæŠ€èƒ½å›¾æ ‡
        const skills = [
            { name: 'attack', label: 'æ™®é€šæ”»å‡»' },
            { name: 'fireball', label: 'ç«çƒæœ¯' },
            { name: 'heal', label: 'æ²»ç–—æœ¯' },
            { name: 'shield', label: 'æŠ¤ç›¾' },
            { name: 'arrow', label: 'ç®­é›¨' },
            { name: 'frost', label: 'å†°éœœ' }
        ];
        const skillContainer = document.getElementById('skillIcons');
        skills.forEach(({ name, label }) => {
            const icon = placeholderAssets.createSkillIcon(name, 48);
            const item = createAssetItem(icon, label);
            skillContainer.appendChild(item);
            totalAssets++;
        });

        // æ˜¾ç¤ºUIå…ƒç´ 
        const uiElements = [
            { type: 'healthbar_bg', width: 200, height: 20, label: 'ç”Ÿå‘½å€¼æ¡èƒŒæ™¯' },
            { type: 'healthbar_fill', width: 196, height: 16, label: 'ç”Ÿå‘½å€¼æ¡å¡«å……' },
            { type: 'manabar_fill', width: 196, height: 16, label: 'é­”æ³•å€¼æ¡å¡«å……' },
            { type: 'button', width: 150, height: 40, label: 'æŒ‰é’®' },
            { type: 'panel', width: 150, height: 100, label: 'é¢æ¿' }
        ];
        const uiContainer = document.getElementById('uiElements');
        uiElements.forEach(({ type, width, height, label }) => {
            const element = placeholderAssets.createUIElement(type, width, height);
            const item = createAssetItem(element, label);
            uiContainer.appendChild(item);
            totalAssets++;
        });

        // æ˜¾ç¤ºç²’å­çº¹ç†
        const particleTypes = [
            { name: 'fire', label: 'ç«ç„°' },
            { name: 'heal', label: 'æ²»ç–—' },
            { name: 'frost', label: 'å†°éœœ' },
            { name: 'spark', label: 'ç«èŠ±' }
        ];
        const particleContainer = document.getElementById('particleTextures');
        particleTypes.forEach(({ name, label }) => {
            const texture = placeholderAssets.createParticleTexture(name, 32);
            const item = createAssetItem(texture, label);
            particleContainer.appendChild(item);
            totalAssets++;
        });

        // æµ‹è¯• AssetManager é›†æˆ
        console.log('Testing AssetManager integration...');
        assetManager.loadPlaceholderAssets();
        console.log('AssetManager has', assetManager.images.size, 'images loaded');

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        const loadTime = Math.round(performance.now() - startTime);
        document.getElementById('totalAssets').textContent = totalAssets;
        document.getElementById('cacheSize').textContent = placeholderAssets.getCacheSize();
        document.getElementById('loadTime').textContent = loadTime + 'ms';

        console.log('âœ… All placeholder assets loaded successfully!');
        console.log('Total assets:', totalAssets);
        console.log('Cache size:', placeholderAssets.getCacheSize());
        console.log('Load time:', loadTime, 'ms');

        // è¾…åŠ©å‡½æ•°ï¼šåˆ›å»ºèµ„æºå±•ç¤ºé¡¹
        function createAssetItem(canvas, label) {
            const item = document.createElement('div');
            item.className = 'asset-item';
            
            const clonedCanvas = document.createElement('canvas');
            clonedCanvas.width = canvas.width;
            clonedCanvas.height = canvas.height;
            const ctx = clonedCanvas.getContext('2d');
            ctx.drawImage(canvas, 0, 0);
            
            const labelElement = document.createElement('label');
            labelElement.textContent = label;
            
            item.appendChild(clonedCanvas);
            item.appendChild(labelElement);
            
            return item;
        }
    </script>
</body>
</html>
