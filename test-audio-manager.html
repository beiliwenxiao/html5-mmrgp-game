<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³é¢‘ç®¡ç†å™¨æµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #4DABF7;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        .section h2 {
            color: #51CF66;
            margin-top: 0;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        button {
            padding: 12px 20px;
            background: #495057;
            color: #fff;
            border: 2px solid #ADB5BD;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        button:hover {
            background: #5A6268;
            border-color: #CED4DA;
        }
        button:active {
            transform: scale(0.95);
        }
        button.primary {
            background: #4DABF7;
            border-color: #1971C2;
        }
        button.primary:hover {
            background: #339AF0;
        }
        button.danger {
            background: #FA5252;
            border-color: #C92A2A;
        }
        button.danger:hover {
            background: #FF6B6B;
        }
        .slider-group {
            margin: 15px 0;
        }
        .slider-group label {
            display: block;
            margin-bottom: 8px;
            color: #ADB5BD;
        }
        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #495057;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4DABF7;
            cursor: pointer;
        }
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4DABF7;
            cursor: pointer;
            border: none;
        }
        .value-display {
            display: inline-block;
            min-width: 40px;
            text-align: right;
            color: #4DABF7;
            font-weight: bold;
        }
        .info {
            background: #1e3a5f;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        .stat {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }
        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #4DABF7;
        }
        .stat-label {
            font-size: 12px;
            color: #aaa;
            margin-top: 5px;
        }
        .note {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #FFE066;
            margin-top: 15px;
        }
        .note h3 {
            margin-top: 0;
            color: #FFE066;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”Š éŸ³é¢‘ç®¡ç†å™¨æµ‹è¯•</h1>
        
        <div class="info">
            <h3>ğŸ“‹ æµ‹è¯•è¯´æ˜</h3>
            <p>æ­¤é¡µé¢æ¼”ç¤ºäº†éŸ³é¢‘ç®¡ç†å™¨çš„åŠŸèƒ½ã€‚ç”±äºæ²¡æœ‰å®é™…çš„éŸ³é¢‘æ–‡ä»¶ï¼ŒæŒ‰é’®ä¼šæ˜¾ç¤ºæ§åˆ¶å°æ—¥å¿—ã€‚</p>
            <p>åœ¨å®é™…æ¸¸æˆä¸­ï¼Œéœ€è¦å°†éŸ³é¢‘æ–‡ä»¶æ”¾åœ¨ <code>assets/audio/</code> ç›®å½•ä¸‹ã€‚</p>
        </div>

        <div class="section">
            <h2>ğŸµ èƒŒæ™¯éŸ³ä¹æ§åˆ¶</h2>
            <div class="controls">
                <button class="primary" onclick="playMusic('bgm_menu')">æ’­æ”¾èœå•éŸ³ä¹</button>
                <button class="primary" onclick="playMusic('bgm_battle')">æ’­æ”¾æˆ˜æ–—éŸ³ä¹</button>
                <button onclick="pauseMusic()">æš‚åœéŸ³ä¹</button>
                <button onclick="resumeMusic()">æ¢å¤éŸ³ä¹</button>
                <button class="danger" onclick="stopMusic()">åœæ­¢éŸ³ä¹</button>
            </div>
            
            <div class="slider-group">
                <label>
                    éŸ³ä¹éŸ³é‡: <span class="value-display" id="musicVolumeValue">50%</span>
                </label>
                <input type="range" id="musicVolume" min="0" max="100" value="50" oninput="setMusicVolume(this.value)">
            </div>
        </div>

        <div class="section">
            <h2>ğŸ® éŸ³æ•ˆæ§åˆ¶</h2>
            <div class="controls">
                <button onclick="playSound('attack')">æ”»å‡»éŸ³æ•ˆ</button>
                <button onclick="playSound('skill')">æŠ€èƒ½éŸ³æ•ˆ</button>
                <button onclick="playSound('heal')">æ²»ç–—éŸ³æ•ˆ</button>
                <button onclick="playSound('hit')">å—å‡»éŸ³æ•ˆ</button>
                <button onclick="playSound('levelup')">å‡çº§éŸ³æ•ˆ</button>
                <button onclick="playSound('coin')">é‡‘å¸éŸ³æ•ˆ</button>
            </div>
            
            <div class="slider-group">
                <label>
                    éŸ³æ•ˆéŸ³é‡: <span class="value-display" id="soundVolumeValue">70%</span>
                </label>
                <input type="range" id="soundVolume" min="0" max="100" value="70" oninput="setSoundVolume(this.value)">
            </div>
        </div>

        <div class="section">
            <h2>âš™ï¸ å…¨å±€æ§åˆ¶</h2>
            <div class="controls">
                <button onclick="toggleMute()">åˆ‡æ¢é™éŸ³</button>
                <button onclick="updateStats()">åˆ·æ–°ç»Ÿè®¡</button>
                <button class="danger" onclick="clearAll()">æ¸…é™¤æ‰€æœ‰éŸ³é¢‘</button>
            </div>
            
            <div class="slider-group">
                <label>
                    ä¸»éŸ³é‡: <span class="value-display" id="masterVolumeValue">100%</span>
                </label>
                <input type="range" id="masterVolume" min="0" max="100" value="100" oninput="setMasterVolume(this.value)">
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“Š ç»Ÿè®¡ä¿¡æ¯</h2>
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="totalSounds">0</div>
                    <div class="stat-label">éŸ³æ•ˆæ•°é‡</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="totalMusic">0</div>
                    <div class="stat-label">éŸ³ä¹æ•°é‡</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="activeSounds">0</div>
                    <div class="stat-label">æ´»è·ƒéŸ³æ•ˆ</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="currentMusic">æ— </div>
                    <div class="stat-label">å½“å‰éŸ³ä¹</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="mutedStatus">å¦</div>
                    <div class="stat-label">é™éŸ³çŠ¶æ€</div>
                </div>
            </div>
        </div>

        <div class="note">
            <h3>ğŸ’¡ ä½¿ç”¨è¯´æ˜</h3>
            <p><strong>æ·»åŠ çœŸå®éŸ³é¢‘æ–‡ä»¶ï¼š</strong></p>
            <ol>
                <li>å°†éŸ³é¢‘æ–‡ä»¶ï¼ˆMP3ã€OGGã€WAVç­‰ï¼‰æ”¾å…¥ <code>assets/audio/</code> ç›®å½•</li>
                <li>åœ¨ä»£ç ä¸­ä½¿ç”¨ <code>audioManager.addSound('key', 'path/to/audio.mp3')</code></li>
                <li>ä½¿ç”¨ <code>audioManager.playSound('key')</code> æ’­æ”¾éŸ³æ•ˆ</li>
                <li>ä½¿ç”¨ <code>audioManager.playMusic('key')</code> æ’­æ”¾èƒŒæ™¯éŸ³ä¹</li>
            </ol>
            <p><strong>æ¨èçš„éŸ³é¢‘æ ¼å¼ï¼š</strong></p>
            <ul>
                <li>éŸ³æ•ˆï¼šMP3 æˆ– OGGï¼ˆçŸ­å°ç²¾æ‚ï¼Œé€‚åˆé¢‘ç¹æ’­æ”¾ï¼‰</li>
                <li>èƒŒæ™¯éŸ³ä¹ï¼šMP3 æˆ– OGGï¼ˆå¾ªç¯æ’­æ”¾ï¼Œæ–‡ä»¶å¤§å°é€‚ä¸­ï¼‰</li>
            </ul>
        </div>
    </div>

    <script type="module">
        import { AudioManager } from './src/core/AudioManager.js';

        const audioManager = new AudioManager();

        // æ¨¡æ‹Ÿæ·»åŠ éŸ³æ•ˆå’ŒéŸ³ä¹ï¼ˆå®é™…åº”è¯¥åŠ è½½çœŸå®æ–‡ä»¶ï¼‰
        // æ³¨æ„ï¼šè¿™äº›åªæ˜¯ç¤ºä¾‹ï¼Œå®é™…ä¸ä¼šæ’­æ”¾å£°éŸ³
        console.log('AudioManager: Initializing demo...');
        console.log('Note: No actual audio files loaded. This is a demonstration of the API.');

        // å°† audioManager æš´éœ²åˆ°å…¨å±€ï¼Œæ–¹ä¾¿æŒ‰é’®è°ƒç”¨
        window.audioManager = audioManager;

        // èƒŒæ™¯éŸ³ä¹æ§åˆ¶
        window.playMusic = (key) => {
            console.log(`Playing music: ${key}`);
            // audioManager.playMusic(key, true); // å®é™…ä½¿ç”¨æ—¶å–æ¶ˆæ³¨é‡Š
            alert(`æ’­æ”¾éŸ³ä¹: ${key}\n\næ³¨æ„ï¼šéœ€è¦æ·»åŠ çœŸå®éŸ³é¢‘æ–‡ä»¶æ‰èƒ½å¬åˆ°å£°éŸ³ã€‚\nè¯·å°†éŸ³é¢‘æ–‡ä»¶æ”¾å…¥ assets/audio/ ç›®å½•ã€‚`);
            updateStats();
        };

        window.pauseMusic = () => {
            console.log('Pausing music');
            audioManager.pauseMusic();
            updateStats();
        };

        window.resumeMusic = () => {
            console.log('Resuming music');
            audioManager.resumeMusic();
            updateStats();
        };

        window.stopMusic = () => {
            console.log('Stopping music');
            audioManager.stopMusic();
            updateStats();
        };

        // éŸ³æ•ˆæ§åˆ¶
        window.playSound = (key) => {
            console.log(`Playing sound: ${key}`);
            // audioManager.playSound(key); // å®é™…ä½¿ç”¨æ—¶å–æ¶ˆæ³¨é‡Š
            alert(`æ’­æ”¾éŸ³æ•ˆ: ${key}\n\næ³¨æ„ï¼šéœ€è¦æ·»åŠ çœŸå®éŸ³é¢‘æ–‡ä»¶æ‰èƒ½å¬åˆ°å£°éŸ³ã€‚`);
            updateStats();
        };

        // éŸ³é‡æ§åˆ¶
        window.setMasterVolume = (value) => {
            const volume = value / 100;
            audioManager.setMasterVolume(volume);
            document.getElementById('masterVolumeValue').textContent = value + '%';
            console.log(`Master volume: ${volume}`);
        };

        window.setSoundVolume = (value) => {
            const volume = value / 100;
            audioManager.setSoundVolume(volume);
            document.getElementById('soundVolumeValue').textContent = value + '%';
            console.log(`Sound volume: ${volume}`);
        };

        window.setMusicVolume = (value) => {
            const volume = value / 100;
            audioManager.setMusicVolume(volume);
            document.getElementById('musicVolumeValue').textContent = value + '%';
            console.log(`Music volume: ${volume}`);
        };

        // å…¨å±€æ§åˆ¶
        window.toggleMute = () => {
            audioManager.toggleMute();
            console.log(`Muted: ${audioManager.muted}`);
            updateStats();
        };

        window.clearAll = () => {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰éŸ³é¢‘å—ï¼Ÿ')) {
                audioManager.clear();
                console.log('All audio cleared');
                updateStats();
            }
        };

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        window.updateStats = () => {
            const stats = audioManager.getStats();
            
            document.getElementById('totalSounds').textContent = stats.totalSounds;
            document.getElementById('totalMusic').textContent = stats.totalMusic;
            document.getElementById('activeSounds').textContent = stats.activeSounds;
            document.getElementById('currentMusic').textContent = stats.currentMusic || 'æ— ';
            document.getElementById('mutedStatus').textContent = stats.muted ? 'æ˜¯' : 'å¦';
            
            console.log('Stats:', stats);
        };

        // åˆå§‹åŒ–ç»Ÿè®¡ä¿¡æ¯
        updateStats();

        console.log('âœ… Audio Manager demo initialized!');
        console.log('API Methods:');
        console.log('- audioManager.addSound(key, url, options)');
        console.log('- audioManager.addMusic(key, url, options)');
        console.log('- audioManager.playSound(key, options)');
        console.log('- audioManager.playMusic(key, fadeIn)');
        console.log('- audioManager.stopMusic(fadeOut)');
        console.log('- audioManager.setMasterVolume(volume)');
        console.log('- audioManager.setSoundVolume(volume)');
        console.log('- audioManager.setMusicVolume(volume)');
        console.log('- audioManager.setMuted(muted)');
    </script>
</body>
</html>
